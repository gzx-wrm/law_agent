<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ê≥ïÂæãAIÂä©Êâã - ÂêéÂè∞ÁÆ°ÁêÜÁ≥ªÁªü</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .sidebar {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .sidebar .nav-link {
            color: rgba(255,255,255,0.8);
            border-radius: 0.5rem;
            margin: 0.2rem 0;
        }
        .sidebar .nav-link:hover {
            color: white;
            background: rgba(255,255,255,0.1);
        }
        .sidebar .nav-link.active {
            color: white;
            background: rgba(255,255,255,0.2);
        }
        .main-content {
            background-color: #f8f9fa;
            min-height: 100vh;
        }
        .card {
            border: none;
            border-radius: 1rem;
            box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,0.075);
        }
        .card-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 1rem 1rem 0 0 !important;
        }
        .stat-card {
            transition: transform 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-5px);
        }
        .login-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .login-card {
            border: none;
            border-radius: 1rem;
            box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- ÁôªÂΩïÈ°µÈù¢ -->
        <div id="loginPage" class="login-container" style="display: none;">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-6 col-lg-4">
                        <div class="card login-card">
                            <div class="card-body p-5">
                                <div class="text-center mb-4">
                                    <h3>üèõÔ∏è Ê≥ïÂæãAIÂä©Êâã</h3>
                                    <p class="text-muted">ÂêéÂè∞ÁÆ°ÁêÜÁ≥ªÁªü</p>
                                </div>
                                <form id="loginForm">
                                    <div class="mb-3">
                                        <label for="adminToken" class="form-label">ÁÆ°ÁêÜÂëòToken</label>
                                        <input type="password" class="form-control" id="adminToken" required>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">
                                        <i class="bi bi-shield-lock"></i> ÁôªÂΩï
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‰∏ªÁïåÈù¢ -->
        <div id="mainContent" class="container-fluid">
            <div class="row">
                <!-- ‰æßËæπÊ†è -->
                <nav class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                    <div class="position-sticky pt-3">
                        <div class="text-center text-white mb-4">
                            <h5>üèõÔ∏è ÁÆ°ÁêÜÂêéÂè∞</h5>
                        </div>
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link active" href="#" data-page="dashboard">
                                    <i class="bi bi-speedometer2"></i> ‰ª™Ë°®Êùø
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-page="users">
                                    <i class="bi bi-people"></i> Áî®Êà∑ÁÆ°ÁêÜ
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-page="analytics">
                                    <i class="bi bi-graph-up"></i> Êï∞ÊçÆÂàÜÊûê
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-page="logs">
                                    <i class="bi bi-file-text"></i> Êìç‰ΩúÊó•Âøó
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-page="config">
                                    <i class="bi bi-gear"></i> Á≥ªÁªüÈÖçÁΩÆ
                                </a>
                            </li>
                            <li class="nav-item mt-4">
                                <a class="nav-link text-danger" href="#" id="logoutBtn">
                                    <i class="bi bi-box-arrow-right"></i> ÈÄÄÂá∫ÁôªÂΩï
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>

                <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
                <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2" id="pageTitle">‰ª™Ë°®Êùø</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button class="btn btn-sm btn-outline-secondary" id="refreshBtn">
                                <i class="bi bi-arrow-clockwise"></i> Âà∑Êñ∞
                            </button>
                        </div>
                    </div>

                    <!-- ‰ª™Ë°®ÊùøÂÜÖÂÆπ -->
                    <div id="dashboardContent" class="page-content">
                        <div class="row mb-4">
                            <div class="col-xl-3 col-md-6 mb-4">
                                <div class="card stat-card border-left-primary shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">ÊÄªÁî®Êà∑Êï∞</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800" id="totalUsers">-</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="bi bi-people fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-3 col-md-6 mb-4">
                                <div class="card stat-card border-left-success shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">ÊÄªÊü•ËØ¢Êï∞</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800" id="totalQueries">-</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="bi bi-chat-dots fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-3 col-md-6 mb-4">
                                <div class="card stat-card border-left-info shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-info text-uppercase mb-1">‰ªäÊó•Êü•ËØ¢</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800" id="dailyQueries">-</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="bi bi-calendar-day fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-3 col-md-6 mb-4">
                                <div class="card stat-card border-left-warning shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Âπ≥ÂùáÂìçÂ∫îÊó∂Èó¥</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800" id="avgResponseTime">-</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="bi bi-speedometer2 fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÁÉ≠Èó®ÈóÆÈ¢ò -->
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold">ÁÉ≠Èó®ÈóÆÈ¢ò Top 10</h6>
                            </div>
                            <div class="card-body">
                                <div id="popularQuestions" class="table-responsive">
                                    <div class="text-center">
                                        <div class="spinner-border" role="status">
                                            <span class="visually-hidden">Âä†ËΩΩ‰∏≠...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Áî®Êà∑ÁÆ°ÁêÜÂÜÖÂÆπ -->
                    <div id="usersContent" class="page-content" style="display: none;">
                        <!-- Áî®Êà∑ÊêúÁ¥¢ -->
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold">Áî®Êà∑ÁÆ°ÁêÜ</h6>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <input type="text" class="form-control" id="userSearch" placeholder="ÊêúÁ¥¢Áî®Êà∑ID...">
                                    </div>
                                    <div class="col-md-2">
                                        <button class="btn btn-primary d-block" onclick="searchUsers()">
                                            <i class="bi bi-search"></i> ÊêúÁ¥¢
                                        </button>
                                    </div>
                                    <div class="col-md-2">
                                        <select class="form-select" id="userPage">
                                            <option value="1">Á¨¨1È°µ</option>
                                            <option value="2">Á¨¨2È°µ</option>
                                            <option value="3">Á¨¨3È°µ</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <button class="btn btn-outline-secondary d-block" onclick="loadUsers()">
                                            <i class="bi bi-arrow-clockwise"></i> Âà∑Êñ∞
                                        </button>
                                    </div>
                                </div>

                                <!-- Áî®Êà∑ÁªüËÆ° -->
                                <div class="row mb-4">
                                    <div class="col-md-3">
                                        <div class="card bg-primary text-white">
                                            <div class="card-body">
                                                <h5 class="card-title">ÊÄªÁî®Êà∑Êï∞</h5>
                                                <h3 id="totalUsersCount">-</h3>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="card bg-success text-white">
                                            <div class="card-body">
                                                <h5 class="card-title">Ê¥ªË∑ÉÁî®Êà∑</h5>
                                                <h3 id="activeUsersCount">-</h3>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="card bg-info text-white">
                                            <div class="card-body">
                                                <h5 class="card-title">‰ªäÊó•ËØ∑Ê±Ç</h5>
                                                <h3 id="todayQueriesCount">-</h3>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="card bg-warning text-white">
                                            <div class="card-body">
                                                <h5 class="card-title">Âπ≥ÂùáÂìçÂ∫î</h5>
                                                <h3 id="avgResponseCount">-</h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Áî®Êà∑ÂàóË°® -->
                                <div id="usersList" class="table-responsive">
                                    <div class="text-center">
                                        <div class="spinner-border" role="status">
                                            <span class="visually-hidden">Âä†ËΩΩ‰∏≠...</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- ÂàÜÈ°µ -->
                                <nav id="userPagination" class="mt-3">
                                    <ul class="pagination justify-content-center">
                                        <li class="page-item">
                                            <a class="page-link" href="#" onclick="changeUserPage(-1)">‰∏ä‰∏ÄÈ°µ</a>
                                        </li>
                                        <li class="page-item active">
                                            <span class="page-link">1</span>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="#" onclick="changeUserPage(1)">‰∏ã‰∏ÄÈ°µ</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>

                        <!-- Áî®Êà∑ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü -->
                        <div class="modal fade" id="userDetailModal" tabindex="-1">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Áî®Êà∑ËØ¶ÊÉÖ</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div id="userDetailContent">
                                            <div class="text-center">
                                                <div class="spinner-border" role="status"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Êï∞ÊçÆÂàÜÊûêÂÜÖÂÆπ -->
                    <div id="analyticsContent" class="page-content" style="display: none;">
                        <!-- Êó∂Èó¥ËåÉÂõ¥ÈÄâÊã© -->
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold">Êï∞ÊçÆÂàÜÊûê</h6>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-3">
                                        <label for="analyticsDays" class="form-label">ÁªüËÆ°Â§©Êï∞</label>
                                        <select class="form-select" id="analyticsDays">
                                            <option value="7">ÊúÄËøë7Â§©</option>
                                            <option value="30">ÊúÄËøë30Â§©</option>
                                            <option value="90">ÊúÄËøë90Â§©</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">&nbsp;</label>
                                        <button class="btn btn-primary d-block" onclick="loadAnalytics()">
                                            <i class="bi bi-bar-chart"></i> Âà∑Êñ∞Êï∞ÊçÆ
                                        </button>
                                    </div>
                                </div>

                                <!-- Ê¥ªÂä®Ë∂ãÂäøÂõæË°® -->
                                <div class="card shadow mb-4">
                                    <div class="card-header py-3">
                                        <h6 class="m-0 font-weight-bold">Áî®Êà∑Ê¥ªÂä®Ë∂ãÂäø</h6>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="activityChart" height="100"></canvas>
                                    </div>
                                </div>

                                <!-- ËØ¶ÁªÜÁªüËÆ°Ë°®Ê†º -->
                                <div class="card shadow mb-4">
                                    <div class="card-header py-3">
                                        <h6 class="m-0 font-weight-bold">ËØ¶ÁªÜÁªüËÆ°Êï∞ÊçÆ</h6>
                                    </div>
                                    <div class="card-body">
                                        <div id="activityTable" class="table-responsive">
                                            <div class="text-center">
                                                <div class="spinner-border" role="status">
                                                    <span class="visually-hidden">Âä†ËΩΩ‰∏≠...</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="logsContent" class="page-content" style="display: none;">
                        <!-- Êó•ÂøóËøáÊª§ÈÄâÈ°π -->
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold">Êìç‰ΩúÊó•Âøó</h6>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-3">
                                        <label for="logLevel" class="form-label">Êó•ÂøóÁ∫ßÂà´</label>
                                        <select class="form-select" id="logLevel">
                                            <option value="">ÂÖ®ÈÉ®</option>
                                            <option value="info">‰ø°ÊÅØ</option>
                                            <option value="warning">Ë≠¶Âëä</option>
                                            <option value="error">ÈîôËØØ</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="logPage" class="form-label">È°µÁ†Å</label>
                                        <input type="number" class="form-control" id="logPage" value="1" min="1">
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">&nbsp;</label>
                                        <button class="btn btn-primary d-block" onclick="loadLogs()">
                                            <i class="bi bi-search"></i> Êü•ËØ¢
                                        </button>
                                    </div>
                                </div>

                                <!-- Êó•ÂøóÂàóË°® -->
                                <div class="card shadow mb-4">
                                    <div class="card-header py-3">
                                        <h6 class="m-0 font-weight-bold">Êó•ÂøóËÆ∞ÂΩï</h6>
                                    </div>
                                    <div class="card-body">
                                        <div id="logsList" class="table-responsive">
                                            <div class="text-center">
                                                <div class="spinner-border" role="status">
                                                    <span class="visually-hidden">Âä†ËΩΩ‰∏≠...</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- ÂàÜÈ°µ -->
                                        <nav id="logPagination" class="mt-3" style="display: none;">
                                            <ul class="pagination justify-content-center">
                                                <li class="page-item" id="prevPage">
                                                    <a class="page-link" href="#" onclick="changeLogPage(-1)">‰∏ä‰∏ÄÈ°µ</a>
                                                </li>
                                                <li class="page-item active">
                                                    <span class="page-link" id="currentPage">1</span>
                                                </li>
                                                <li class="page-item" id="nextPage">
                                                    <a class="page-link" href="#" onclick="changeLogPage(1)">‰∏ã‰∏ÄÈ°µ</a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="configContent" class="page-content" style="display: none;">
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold">Á≥ªÁªüÈÖçÁΩÆ</h6>
                            </div>
                            <div class="card-body">
                                <!-- ÈÖçÁΩÆË°®Âçï -->
                                <form id="configForm">
                                    <div class="row">
                                        <!-- ÂÆâÂÖ®ÈÖçÁΩÆ -->
                                        <div class="col-md-6">
                                            <h6 class="mb-3"><i class="bi bi-shield-lock"></i> ÂÆâÂÖ®ÈÖçÁΩÆ</h6>
                                            <div class="mb-3">
                                                <label for="adminToken" class="form-label">ÁÆ°ÁêÜÂëòToken</label>
                                                <div class="input-group">
                                                    <input type="password" class="form-control" id="adminTokenConfig" placeholder="ËæìÂÖ•Êñ∞ÁöÑÁÆ°ÁêÜÂëòToken">
                                                    <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('adminTokenConfig')">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                </div>
                                                <div class="form-text">‰øÆÊîπÂêéÈúÄË¶Å‰ΩøÁî®Êñ∞TokenÈáçÊñ∞ÁôªÂΩï</div>
                                            </div>
                                            <div class="mb-3">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="enableAnalytics">
                                                    <label class="form-check-label" for="enableAnalytics">
                                                        ÂêØÁî®Áî®Êà∑Ë°å‰∏∫Êï∞ÊçÆÂàÜÊûê
                                                    </label>
                                                </div>
                                                <div class="form-text">ÂÖ≥Èó≠ÂêéÂ∞Ü‰∏çÂÜçÊî∂ÈõÜÁî®Êà∑ËØ∑Ê±ÇÊï∞ÊçÆ</div>
                                            </div>
                                        </div>

                                        <!-- Á≥ªÁªüÈÖçÁΩÆ -->
                                        <div class="col-md-6">
                                            <h6 class="mb-3"><i class="bi bi-gear"></i> Á≥ªÁªüÂèÇÊï∞</h6>
                                            <div class="mb-3">
                                                <label for="maxResponseLength" class="form-label">ÊúÄÂ§ßÂìçÂ∫îÈïøÂ∫¶</label>
                                                <input type="number" class="form-control" id="maxResponseLength" min="100" max="10000">
                                                <div class="form-text">Á≥ªÁªüÁªôÁî®Êà∑ÁöÑÂìçÂ∫îÊúÄÂ§ßÂ≠óÁ¨¶Êï∞</div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="responseTimeout" class="form-label">ÂìçÂ∫îË∂ÖÊó∂Êó∂Èó¥ÔºàÁßíÔºâ</label>
                                                <input type="number" class="form-control" id="responseTimeout" min="5" max="300">
                                                <div class="form-text">AIÂìçÂ∫îÁöÑÊúÄÂ§ßÁ≠âÂæÖÊó∂Èó¥</div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="apiTimeout" class="form-label">APIË∂ÖÊó∂Êó∂Èó¥ÔºàÁßíÔºâ</label>
                                                <input type="number" class="form-control" id="apiTimeout" min="1" max="60">
                                                <div class="form-text">APIËØ∑Ê±ÇÁöÑË∂ÖÊó∂Êó∂Èó¥</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mt-4">
                                        <div class="col-12">
                                            <h6 class="mb-3"><i class="bi bi-link-45deg"></i> ÈõÜÊàêÈÖçÁΩÆ</h6>
                                            <div class="mb-3">
                                                <label for="callbackUrl" class="form-label">ÂõûË∞ÉURL</label>
                                                <input type="url" class="form-control" id="callbackUrl">
                                                <div class="form-text">ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑ÂõûË∞ÉÂú∞ÂùÄ</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mt-4">
                                        <div class="col-12">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="bi bi-check-circle"></i> ‰øùÂ≠òÈÖçÁΩÆ
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary ms-2" onclick="loadConfig()">
                                                <i class="bi bi-arrow-clockwise"></i> ÈáçÊñ∞Âä†ËΩΩ
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- ÈÖçÁΩÆÁä∂ÊÄÅ -->
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold">Á≥ªÁªüÁä∂ÊÄÅ</h6>
                            </div>
                            <div class="card-body">
                                <div id="systemStatus">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h6>Êï∞ÊçÆÂ∫ìÁä∂ÊÄÅ</h6>
                                            <div id="dbStatus">
                                                <div class="spinner-border spinner-border-sm" role="status"></div>
                                                <span class="ms-2">Ê£ÄÊü•‰∏≠...</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // ÂÖ®Â±ÄÂèòÈáè
        let adminToken = localStorage.getItem('adminToken');
        const API_BASE = window.location.origin;

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            if (adminToken) {
                showMainContent();
                loadDashboard();
            } else {
                showLoginPage();
            }
        });

        // ÊòæÁ§∫ÁôªÂΩïÈ°µÈù¢
        function showLoginPage() {
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('mainContent').style.display = 'none';
        }

        // ÊòæÁ§∫‰∏ªÂÜÖÂÆπ
        function showMainContent() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
        }

        // ÁôªÂΩï
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const token = document.getElementById('adminToken').value;

            // ÁÆÄÂçïÈ™åËØÅtokenÔºàÂÆûÈôÖÂ∫îËØ•Ë∞ÉÁî®APIÈ™åËØÅÔºâ
            if (token) {
                adminToken = token;
                localStorage.setItem('adminToken', token);
                showMainContent();
                loadDashboard();
                showAlert('ÁôªÂΩïÊàêÂäü', 'success');
            } else {
                showAlert('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑToken', 'danger');
            }
        });

        // ÈÄÄÂá∫ÁôªÂΩï
        document.getElementById('logoutBtn').addEventListener('click', function(e) {
            e.preventDefault();
            localStorage.removeItem('adminToken');
            adminToken = null;
            showLoginPage();
            showAlert('Â∑≤ÈÄÄÂá∫ÁôªÂΩï', 'info');
        });

        // È°µÈù¢ÂàáÊç¢
        document.querySelectorAll('.nav-link[data-page]').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();

                // Êõ¥Êñ∞ÂØºËà™Áä∂ÊÄÅ
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                this.classList.add('active');

                // ÊòæÁ§∫ÂØπÂ∫îÈ°µÈù¢
                const page = this.dataset.page;
                document.querySelectorAll('.page-content').forEach(content => {
                    content.style.display = 'none';
                });

                const contentElement = document.getElementById(page + 'Content');
                if (contentElement) {
                    contentElement.style.display = 'block';
                    document.getElementById('pageTitle').textContent = this.textContent.trim();

                    // Âä†ËΩΩÈ°µÈù¢Êï∞ÊçÆ
                    loadPageData(page);
                }
            });
        });

        // Âà∑Êñ∞ÊåâÈíÆ
        document.getElementById('refreshBtn').addEventListener('click', function() {
            const activePage = document.querySelector('.nav-link.active').dataset.page;
            loadPageData(activePage);
        });

        // Âä†ËΩΩÈ°µÈù¢Êï∞ÊçÆ
        function loadPageData(page) {
            switch(page) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'users':
                    loadUsers();
                    break;
                case 'analytics':
                    loadAnalytics();
                    break;
                case 'logs':
                    loadLogs();
                    break;
                case 'config':
                    loadConfig();
                    break;
            }
        }

        // Âä†ËΩΩ‰ª™Ë°®ÊùøÊï∞ÊçÆ
        async function loadDashboard() {
            try {
                const response = await fetch(`${API_BASE}/api/admin/stats/system`, {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('totalUsers').textContent = data.total_users || 0;
                    document.getElementById('totalQueries').textContent = data.total_queries || 0; // ‰øùÊåÅÂÖºÂÆπÊÄß
                    document.getElementById('dailyQueries').textContent = data.daily_queries || 0;
                    document.getElementById('avgResponseTime').textContent = (data.avg_response_time || 0).toFixed(2) + 's';

                    // ÊòæÁ§∫ÁÉ≠Èó®ÈóÆÈ¢ò
                    if (data.top_questions && data.top_questions.length > 0) {
                        let html = '<table class="table table-bordered"><thead><tr><th>ÊéíÂêç</th><th>ÈóÆÈ¢ò</th><th>Ê¨°Êï∞</th></tr></thead><tbody>';
                        data.top_questions.forEach((q, index) => {
                            html += `<tr><td>${index + 1}</td><td>${q.question}</td><td>${q.count}</td></tr>`;
                        });
                        html += '</tbody></table>';
                        document.getElementById('popularQuestions').innerHTML = html;
                    }
                }
            } catch (error) {
                console.error('Âä†ËΩΩ‰ª™Ë°®ÊùøÊï∞ÊçÆÂ§±Ë¥•:', error);
                showAlert('Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•', 'danger');
            }
        }

        // Âä†ËΩΩÁî®Êà∑Êï∞ÊçÆ
        async function loadUsers() {
            try {
                const response = await fetch(`${API_BASE}/api/admin/users`, {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const users = await response.json();
                    let html = '<table class="table table-bordered"><thead><tr><th>Áî®Êà∑ID</th><th>Êü•ËØ¢Ê¨°Êï∞</th><th>ÊúÄÂêéÊü•ËØ¢</th><th>Âπ≥ÂùáÂìçÂ∫îÊó∂Èó¥</th></tr></thead><tbody>';

                    users.forEach(user => {
                        const lastQuery = user.last_query_time ? new Date(user.last_query_time).toLocaleString() : '-';
                        const avgTime = user.avg_response_time ? user.avg_response_time.toFixed(2) + 's' : '-';
                        html += `<tr><td>${user.user_id}</td><td>${user.total_queries}</td><td>${lastQuery}</td><td>${avgTime}</td></tr>`; // ‰øùÊåÅÂÖºÂÆπÊÄß
                    });

                    html += '</tbody></table>';
                    document.getElementById('usersList').innerHTML = html;
                }
            } catch (error) {
                console.error('Âä†ËΩΩÁî®Êà∑Êï∞ÊçÆÂ§±Ë¥•:', error);
                showAlert('Âä†ËΩΩÁî®Êà∑Êï∞ÊçÆÂ§±Ë¥•', 'danger');
            }
        }

        // Âä†ËΩΩÁî®Êà∑Êï∞ÊçÆ
        async function loadUsers() {
            try {
                const response = await fetch(`${API_BASE}/api/admin/users`, {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const users = await response.json();
                    let html = '<table class="table table-striped table-hover"><thead><tr><th>Áî®Êà∑ID</th><th>Êü•ËØ¢Ê¨°Êï∞</th><th>ÊúÄÂêéÊü•ËØ¢</th><th>Âπ≥ÂùáÂìçÂ∫îÊó∂Èó¥</th><th>Êìç‰Ωú</th></tr></thead><tbody>';

                    users.forEach(user => {
                        const lastQuery = user.last_query_time ? new Date(user.last_query_time).toLocaleString() : '-';
                        const avgTime = user.avg_response_time ? user.avg_response_time.toFixed(2) + 's' : '-';
                        html += `<tr>
                            <td><code>${user.user_id}</code></td>
                            <td><span class="badge bg-primary">${user.total_queries}</span></td>
                            <td>${lastQuery}</td>
                            <td><span class="badge bg-info">${avgTime}</span></td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary" onclick="showUserDetail('${user.user_id}')">
                                    <i class="bi bi-eye"></i> ËØ¶ÊÉÖ
                                </button>
                            </td>
                        </tr>`;
                    });

                    html += '</tbody></table>';
                    document.getElementById('usersList').innerHTML = html;

                    // Êõ¥Êñ∞Áî®Êà∑ÁªüËÆ°
                    updateUserStats();
                }
            } catch (error) {
                console.error('Âä†ËΩΩÁî®Êà∑Êï∞ÊçÆÂ§±Ë¥•:', error);
                showAlert('Âä†ËΩΩÁî®Êà∑Êï∞ÊçÆÂ§±Ë¥•', 'danger');
            }
        }

        // ÊêúÁ¥¢Áî®Êà∑
        async function searchUsers() {
            const searchTerm = document.getElementById('userSearch').value.trim();
            let url = `${API_BASE}/api/admin/users`;

            if (searchTerm) {
                url += `?search=${encodeURIComponent(searchTerm)}`;
            }

            try {
                const response = await fetch(url, {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const users = await response.json();
                    let html = '<table class="table table-striped table-hover"><thead><tr><th>Áî®Êà∑ID</th><th>Êü•ËØ¢Ê¨°Êï∞</th><th>ÊúÄÂêéÊü•ËØ¢</th><th>Âπ≥ÂùáÂìçÂ∫îÊó∂Èó¥</th><th>Êìç‰Ωú</th></tr></thead><tbody>';

                    if (users.length === 0) {
                        html += '<tr><td colspan="5" class="text-center">Ê≤°ÊúâÊâæÂà∞ÂåπÈÖçÁöÑÁî®Êà∑</td></tr>';
                    } else {
                        users.forEach(user => {
                            const lastQuery = user.last_query_time ? new Date(user.last_query_time).toLocaleString() : '-';
                            const avgTime = user.avg_response_time ? user.avg_response_time.toFixed(2) + 's' : '-';
                            html += `<tr>
                                <td><code>${user.user_id}</code></td>
                                <td><span class="badge bg-primary">${user.total_queries}</span></td>
                                <td>${lastQuery}</td>
                                <td><span class="badge bg-info">${avgTime}</span></td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary" onclick="showUserDetail('${user.user_id}')">
                                        <i class="bi bi-eye"></i> ËØ¶ÊÉÖ
                                    </button>
                                </td>
                            </tr>`;
                        });
                    }

                    html += '</tbody></table>';
                    document.getElementById('usersList').innerHTML = html;
                }
            } catch (error) {
                console.error('ÊêúÁ¥¢Áî®Êà∑Â§±Ë¥•:', error);
                showAlert('ÊêúÁ¥¢Áî®Êà∑Â§±Ë¥•', 'danger');
            }
        }

        // ÊòæÁ§∫Áî®Êà∑ËØ¶ÊÉÖ
        async function showUserDetail(userId) {
            const modal = new bootstrap.Modal(document.getElementById('userDetailModal'));
            document.getElementById('userDetailContent').innerHTML = `
                <div class="text-center">
                    <div class="spinner-border" role="status"></div>
                    <p class="mt-2">Âä†ËΩΩÁî®Êà∑ËØ¶ÊÉÖ‰∏≠...</p>
                </div>
            `;
            modal.show();

            try {
                const response = await fetch(`${API_BASE}/api/admin/users/${userId}/history`, {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    let html = `
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5>Áî®Êà∑ID: <code>${userId}</code></h5>
                                <p>ÊÄªÊü•ËØ¢Êï∞: <span class="badge bg-primary">${data.total}</span></p>
                            </div>
                        </div>
                        <h6>Êü•ËØ¢ÂéÜÂè≤:</h6>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Êó∂Èó¥</th>
                                        <th>ÈóÆÈ¢ò</th>
                                        <th>ÂìçÂ∫î</th>
                                        <th>ÂìçÂ∫îÊó∂Èó¥</th>
                                        <th>Áä∂ÊÄÅ</th>
                                    </tr>
                                </thead>
                                <tbody>
                    `;

                    if (data.history && data.history.length > 0) {
                        data.history.forEach(item => {
                            const statusBadge = item.status === 'success' ?
                                '<span class="badge bg-success">ÊàêÂäü</span>' :
                                '<span class="badge bg-danger">Â§±Ë¥•</span>';

                            html += `<tr>
                                <td>${new Date(item.timestamp).toLocaleString()}</td>
                                <td>${item.question}</td>
                                <td><span title="${item.response}">${item.response}</span></td>
                                <td>${item.response_time ? item.response_time.toFixed(2) + 's' : '-'}</td>
                                <td>${statusBadge}</td>
                            </tr>`;
                        });
                    } else {
                        html += '<tr><td colspan="5" class="text-center">ÊöÇÊó†Êü•ËØ¢ËÆ∞ÂΩï</td></tr>';
                    }

                    html += '</tbody></table></div>';
                    document.getElementById('userDetailContent').innerHTML = html;
                }
            } catch (error) {
                console.error('Âä†ËΩΩÁî®Êà∑ËØ¶ÊÉÖÂ§±Ë¥•:', error);
                document.getElementById('userDetailContent').innerHTML = '<p class="text-danger">Âä†ËΩΩÁî®Êà∑ËØ¶ÊÉÖÂ§±Ë¥•</p>';
            }
        }

        // Êõ¥Êñ∞Áî®Êà∑ÁªüËÆ°
        async function updateUserStats() {
            try {
                const response = await fetch(`${API_BASE}/api/admin/stats/system`, {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('totalUsersCount').textContent = data.total_users || 0;
                    document.getElementById('activeUsersCount').textContent = data.total_users || 0; // ÁÆÄÂåñÂ§ÑÁêÜ
                    document.getElementById('todayQueriesCount').textContent = data.daily_queries || 0;
                    document.getElementById('avgResponseCount').textContent = (data.avg_response_time || 0).toFixed(1) + 's';
                }
            } catch (error) {
                console.error('Êõ¥Êñ∞Áî®Êà∑ÁªüËÆ°Â§±Ë¥•:', error);
            }
        }

        // Âä†ËΩΩÊï∞ÊçÆÂàÜÊûê
        let activityChart = null;
        async function loadAnalytics() {
            const days = document.getElementById('analyticsDays').value;

            try {
                const response = await fetch(`${API_BASE}/api/admin/stats/activity?days=${days}`, {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();

                    // Êõ¥Êñ∞ÂõæË°®
                    updateActivityChart(data.activities);

                    // Êõ¥Êñ∞Ë°®Ê†º
                    updateActivityTable(data.activities);
                }
            } catch (error) {
                console.error('Âä†ËΩΩÊï∞ÊçÆÂàÜÊûêÂ§±Ë¥•:', error);
                showAlert('Âä†ËΩΩÊï∞ÊçÆÂàÜÊûêÂ§±Ë¥•', 'danger');
            }
        }

        // Êõ¥Êñ∞Ê¥ªÂä®ÂõæË°®
        function updateActivityChart(activities) {
            const ctx = document.getElementById('activityChart').getContext('2d');

            if (activityChart) {
                activityChart.destroy();
            }

            activityChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: activities.map(a => a.date),
                    datasets: [{
                        label: 'Ê¥ªË∑ÉÁî®Êà∑',
                        data: activities.map(a => a.active_users),
                        borderColor: 'rgb(75, 192, 192)',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        yAxisID: 'y',
                    }, {
                        label: 'Êü•ËØ¢Ê¨°Êï∞',
                        data: activities.map(a => a.total_queries),
                        borderColor: 'rgb(255, 99, 132)',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        yAxisID: 'y1',
                    }]
                },
                options: {
                    responsive: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: {
                                drawOnChartArea: false,
                            },
                        },
                    }
                }
            });
        }

        // Êõ¥Êñ∞Ê¥ªÂä®Ë°®Ê†º
        function updateActivityTable(activities) {
            let html = '<table class="table table-striped"><thead><tr><th>Êó•Êúü</th><th>Ê¥ªË∑ÉÁî®Êà∑</th><th>Êü•ËØ¢Ê¨°Êï∞</th><th>Âπ≥ÂùáÂìçÂ∫îÊó∂Èó¥</th></tr></thead><tbody>';

            activities.forEach(activity => {
                html += `<tr>
                    <td>${activity.date}</td>
                    <td><span class="badge bg-primary">${activity.active_users}</span></td>
                    <td><span class="badge bg-success">${activity.total_queries}</span></td> // ‰øùÊåÅÂÖºÂÆπÊÄß
                    <td><span class="badge bg-info">${activity.avg_response_time.toFixed(2)}s</span></td>
                </tr>`;
            });

            html += '</tbody></table>';
            document.getElementById('activityTable').innerHTML = html;
        }

        // Âä†ËΩΩÊìç‰ΩúÊó•Âøó
        async function loadLogs() {
            const level = document.getElementById('logLevel').value;
            const page = document.getElementById('logPage').value;

            let url = `${API_BASE}/api/admin/logs?page=${page}`;
            if (level) {
                url += `&level=${level}`;
            }

            try {
                const response = await fetch(url, {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();

                    // Êõ¥Êñ∞Êó•ÂøóÂàóË°®
                    updateLogsList(data.logs);

                    // Êõ¥Êñ∞ÂàÜÈ°µ
                    updateLogPagination(page);
                }
            } catch (error) {
                console.error('Âä†ËΩΩÊìç‰ΩúÊó•ÂøóÂ§±Ë¥•:', error);
                showAlert('Âä†ËΩΩÊìç‰ΩúÊó•ÂøóÂ§±Ë¥•', 'danger');
            }
        }

        // Êõ¥Êñ∞Êó•ÂøóÂàóË°®
        function updateLogsList(logs) {
            let html = '<table class="table table-striped"><thead><tr><th>Êó∂Èó¥</th><th>Á∫ßÂà´</th><th>Êìç‰Ωú</th><th>Áî®Êà∑</th><th>ËØ¶ÊÉÖ</th></tr></thead><tbody>';

            logs.forEach(log => {
                const levelBadge = getLogLevelBadge(log.level);
                const time = new Date(log.timestamp).toLocaleString();

                html += `<tr>
                    <td>${time}</td>
                    <td>${levelBadge}</td>
                    <td>${log.operation}</td>
                    <td>${log.user_id || '-'}</td>
                    <td><small title="${log.details || '-'}">${(log.details || '-').substring(0, 50)}...</small></td>
                </tr>`;
            });

            html += '</tbody></table>';
            document.getElementById('logsList').innerHTML = html;
        }

        // Ëé∑ÂèñÊó•ÂøóÁ∫ßÂà´ÂæΩÁ´†
        function getLogLevelBadge(level) {
            switch(level) {
                case 'info': return '<span class="badge bg-info">‰ø°ÊÅØ</span>';
                case 'warning': return '<span class="badge bg-warning">Ë≠¶Âëä</span>';
                case 'error': return '<span class="badge bg-danger">ÈîôËØØ</span>';
                default: return `<span class="badge bg-secondary">${level}</span>`;
            }
        }

        // Êõ¥Êñ∞Êó•ÂøóÂàÜÈ°µ
        function updateLogPagination(currentPage) {
            document.getElementById('currentPage').textContent = currentPage;
            document.getElementById('logPagination').style.display = 'block';
        }

        // ÂàáÊç¢Êó•ÂøóÈ°µÈù¢
        function changeLogPage(direction) {
            const currentPage = parseInt(document.getElementById('logPage').value);
            const newPage = Math.max(1, currentPage + direction);
            document.getElementById('logPage').value = newPage;
            loadLogs();
        }

        // Âä†ËΩΩÁ≥ªÁªüÈÖçÁΩÆ
        async function loadConfig() {
            try {
                const response = await fetch(`${API_BASE}/api/admin/config`, {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const config = await response.json();

                    // Â°´ÂÖÖÈÖçÁΩÆË°®Âçï
                    Object.keys(config).forEach(key => {
                        const element = document.getElementById(key + 'Config');
                        if (element) {
                            if (element.type === 'checkbox') {
                                element.checked = config[key].value === 'true';
                            } else {
                                element.value = config[key].value;
                            }
                        }
                    });

                    // ÁâπÊÆäÂ§ÑÁêÜ
                    if (config.callback_url) {
                        document.getElementById('callbackUrl').value = config.callback_url.value;
                    }

                    // Ê£ÄÊü•Á≥ªÁªüÁä∂ÊÄÅ
                    checkSystemStatus();
                }
            } catch (error) {
                console.error('Âä†ËΩΩÁ≥ªÁªüÈÖçÁΩÆÂ§±Ë¥•:', error);
                showAlert('Âä†ËΩΩÁ≥ªÁªüÈÖçÁΩÆÂ§±Ë¥•', 'danger');
            }
        }

        // ‰øùÂ≠òÈÖçÁΩÆ
        document.getElementById('configForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const configs = [
                { key: 'admin_token', value: document.getElementById('adminTokenConfig').value },
                { key: 'max_response_length', value: document.getElementById('maxResponseLength').value },
                { key: 'response_timeout', value: document.getElementById('responseTimeout').value },
                { key: 'api_timeout', value: document.getElementById('apiTimeout').value },
                { key: 'enable_analytics', value: document.getElementById('enableAnalytics').checked.toString() },
                { key: 'callback_url', value: document.getElementById('callbackUrl').value }
            ];

            try {
                for (const config of configs) {
                    if (config.value) {
                        const response = await fetch(`${API_BASE}/api/admin/config`, {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${adminToken}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(config)
                        });

                        if (!response.ok) {
                            throw new Error(`‰øùÂ≠òÈÖçÁΩÆ ${config.key} Â§±Ë¥•`);
                        }
                    }
                }

                showAlert('ÈÖçÁΩÆ‰øùÂ≠òÊàêÂäü', 'success');

                // Â¶ÇÊûú‰øÆÊîπ‰∫ÜtokenÔºåÈúÄË¶ÅÈáçÊñ∞ÁôªÂΩï
                if (configs[0].value && configs[0].value !== adminToken) {
                    localStorage.setItem('adminToken', configs[0].value);
                    adminToken = configs[0].value;
                    showAlert('ÁÆ°ÁêÜÂëòTokenÂ∑≤Êõ¥Êñ∞ÔºåËØ∑ËÆ∞‰ΩèÊñ∞Token', 'warning');
                }
            } catch (error) {
                console.error('‰øùÂ≠òÈÖçÁΩÆÂ§±Ë¥•:', error);
                showAlert('‰øùÂ≠òÈÖçÁΩÆÂ§±Ë¥•', 'danger');
            }
        });

        // Ê£ÄÊü•Á≥ªÁªüÁä∂ÊÄÅ
        async function checkSystemStatus() {
            // Ê£ÄÊü•Êï∞ÊçÆÂ∫ìÁä∂ÊÄÅ
            document.getElementById('dbStatus').innerHTML = '<span class="text-success"><i class="bi bi-check-circle"></i> Êï∞ÊçÆÂ∫ìËøûÊé•Ê≠£Â∏∏</span>';
        }

        // ÂàáÊç¢ÂØÜÁ†ÅÊòæÁ§∫
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const icon = event.target;

            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('bi-eye');
                icon.classList.add('bi-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('bi-eye-slash');
                icon.classList.add('bi-eye');
            }
        }

        // Áî®Êà∑È°µÈù¢ÂàáÊç¢
        function changeUserPage(direction) {
            const currentPage = parseInt(document.getElementById('userPage').value);
            const newPage = Math.max(1, currentPage + direction);
            document.getElementById('userPage').value = newPage;
            loadUsers();
        }

        // ÊòæÁ§∫ÊèêÁ§∫Ê∂àÊÅØ
        function showAlert(message, type) {
            const alertHtml = `
                <div class="alert alert-${type} alert-dismissible fade show" role="alert">
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            `;

            // Âú®È°µÈù¢È°∂ÈÉ®ÊòæÁ§∫ÊèêÁ§∫
            const mainContent = document.querySelector('.main-content');
            mainContent.insertAdjacentHTML('afterbegin', alertHtml);

            // 3ÁßíÂêéËá™Âä®Ê∂àÂ§±
            setTimeout(() => {
                const alert = mainContent.querySelector('.alert');
                if (alert) {
                    const bsAlert = new bootstrap.Alert(alert);
                    bsAlert.close();
                }
            }, 3000);
        }
    </script>
</body>
</html>